</div><!-- /suite -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>


<script>

    $(document).ready(function () {

        /*

         highlight v5

         Highlights arbitrary terms.

         <http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html>

         MIT license.

         Johann Burkard
         <http://johannburkard.de>
         <mailto:jb@eaio.com>

         */

        jQuery.fn.highlight = function (pat) {
            function innerHighlight(node, pat) {
                var skip = 0;
                if (node.nodeType == 3) {
                    var pos = node.data.toUpperCase().indexOf(pat);
                    pos -= (node.data.substr(0, pos).toUpperCase().length - node.data.substr(0, pos).length);
                    if (pos >= 0) {
                        var spannode = document.createElement('span');
                        spannode.className = 'highlight';
                        var middlebit = node.splitText(pos);
                        var endbit = middlebit.splitText(pat.length);
                        var middleclone = middlebit.cloneNode(true);
                        spannode.appendChild(middleclone);
                        middlebit.parentNode.replaceChild(spannode, middlebit);
                        skip = 1;
                    }
                }
                else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {
                    for (var i = 0; i < node.childNodes.length; ++i) {
                        i += innerHighlight(node.childNodes[i], pat);
                    }
                }
                return skip;
            }

            return this.length && pat && pat.length ? this.each(function () {
                innerHighlight(this, pat.toUpperCase());
            }) : this;
        };

        jQuery.fn.removeHighlight = function () {
            return this.find("span.highlight").each(function () {
                this.parentNode.firstChild.nodeName;
                with (this.parentNode) {
                    replaceChild(this.firstChild, this);
                    normalize();
                }
            }).end();
        };
    });

</script>

<script>
    $(document).ready(function () {

//        // NEW selector
//        jQuery.expr[':'].Contains = function(a, i, m) {
//            return jQuery(a).text().toUpperCase()
//                            .indexOf(m[3].toUpperCase()) >= 0;
//        };
//
//        // OVERWRITES old selecor
//        jQuery.expr[':'].contains = function(a, i, m) {
//            return jQuery(a).text().toUpperCase()
//                            .indexOf(m[3].toUpperCase()) >= 0;
//        };
//
//        $.expr[":"].contains = $.expr.createPseudo(function(arg) {
//            return function( elem ) {
//                return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
//            };
//        });

        toggle = function ($target) {
            if (($target).is(':visible')) {
                $target.fadeOut();
            } else {
                $target.fadeIn();
            }
        }

        removeAllColorClasses = function ($target) {
            $target.removeClass('panel-default');
            $target.removeClass('panel-primary');
            $target.removeClass('panel-success');
            $target.removeClass('panel-info');
            $target.removeClass('panel-warning');
            $target.removeClass('panel-danger');
        }

        mark = function ($target, $class) {

            removeAllColorClasses($target);
            $target.addClass('panel-' + $class);

            if ($target.hasClass('feature')) {
                if ($class != 'success')
                    $target.find(".feature-body").show();
            }
            if ($target.hasClass('scenario')) {
                if ($class != 'success')
                    $target.find(".scenario-body").show();
            }
        }

        $(".feature").each(function (index) {
            if ($(this).find('.btn-danger').length > 0) {
                mark($(this), 'danger');
                return;
            }
            if ($(this).find('.btn-warning').length > 0) {
                mark($(this), 'warning');
                return;
            }
            if ($(this).find('.btn-default').length > 0) {
                mark($(this), 'default');
                return;
            }
            if ($(this).find('.btn-info').length > 0) {
                mark($(this), 'info');
                return;
            }
            mark($(this), 'success');
        });

        $(".scenario").each(function (index) {
            if ($(this).find('.btn-danger').length > 0) {
                mark($(this), 'danger');
                return;
            }
            if ($(this).find('.btn-warning').length > 0) {
                mark($(this), 'warning');
                return;
            }
            if ($(this).find('.btn-default').length > 0) {
                mark($(this), 'default');
                return;
            }
            if ($(this).find('.btn-info').length > 0) {
                mark($(this), 'info');
                return;
            }
            mark($(this), 'success');
        });


        $(".feature-heading").click(function () {
            toggle($(this).parent().find(".feature-body"));
        });

        $(".scenario-heading").click(function () {
            toggle($(this).parent().find(".scenario-body"));
        });


        $('#btn-search').click(function (event) {
            event.preventDefault();

            $('.feature').hide();
            $(".feature:contains(" + $('#txt-search').val() + ")").show();
//            $("body *").removeHighlight();
//            $("body *").highlight($('#txt-search').val());
        });
    });

</script>

</body>
</html>
